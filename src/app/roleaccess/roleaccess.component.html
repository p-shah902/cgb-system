<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <div class="page-card-div">
        <div class="form-header mb-4">
          <div class="row align-items-center">
            <div class="col-6">
              <div class="fh-title">
                <h3>Role Access</h3>
              </div>
            </div>
            <div class="col-6">
              <div class="role-btn-div text-end">
                <button class="btn btn-light ms-auto" (click)="newRole()">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M13.3334 5.33516V10.6685M10.6668 8.00182H16.0001M9.06678 3.73307C9.06678 5.49938 7.63425 6.93098 5.86678 6.93098C4.09931 6.93098 2.66678 5.49938 2.66678 3.73307C2.66678 1.96676 4.09931 0.535156 5.86678 0.535156C7.63425 0.535156 9.06678 1.96676 9.06678 3.73307ZM11.2001 15.4588L0.533447 15.4588C0.533447 14.7014 0.533447 13.9808 0.533447 13.3284C0.533447 11.561 1.96613 10.1289 3.73345 10.1289L8.00011 10.1289C9.76742 10.1289 11.2001 11.561 11.2001 13.3284C11.2001 13.9808 11.2001 14.7014 11.2001 15.4588Z"
                      stroke="white" stroke-width="1.06667"/>
                  </svg>
                  Add New Role
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="page-card-body">
          <div class="role-access-table">
            <div class="table-responsive">
              <table class="table table-borderless">
                <thead>
                <tr>
                  <th width="28%">
                    <small>Roles</small>
                  </th>
                  <ng-container *ngFor="let role of roles">
                    <th width="12%">
                      {{ role.name }}
                    </th>
                  </ng-container>
                  <th width="12%">
                  </th>
                </tr>
                </thead>
                <tbody>
                <ng-container *ngFor="let access of accessTypes">
                  <tr>
                    <td class="p-0" colspan="7">
                      <div class="custom-accordion" ngbAccordion>
                        <div ngbAccordionItem [collapsed]="false">
                          <h2 ngbAccordionHeader>
                            <button ngbAccordionButton>
                              {{ access.typeName }}
                            </button>
                            <button class="btn btn-edit">
                              <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                   xmlns="http://www.w3.org/2000/svg">
                                <rect width="32" height="32" rx="5.81818" fill="#F1EBFA"/>
                                <rect x="0.363636" y="0.363636" width="31.2727" height="31.2727" rx="5.45455"
                                      stroke="#1B202B" stroke-opacity="0.5" stroke-width="0.727273"/>
                                <path
                                  d="M18.5009 10.4551L17.3665 11.5895L20.4134 14.6363L21.5477 13.502C22.1337 12.916 22.1337 11.9668 21.5477 11.3809L20.6243 10.4551C20.0384 9.86914 19.0891 9.86914 18.5032 10.4551H18.5009ZM16.8368 12.1191L11.3735 17.5848C11.1298 17.8285 10.9516 18.1309 10.8532 18.4613L10.0235 21.2809C9.96493 21.4801 10.0188 21.6934 10.1641 21.8387C10.3095 21.984 10.5227 22.0379 10.7196 21.9816L13.5391 21.152C13.8696 21.0535 14.172 20.8754 14.4157 20.6316L19.8837 15.166L16.8368 12.1191Z"
                                  stroke="#0C0C0C" stroke-width="1.02857"/>
                              </svg>
                            </button>
                          </h2>
                          <div ngbAccordionCollapse>
                            <div ngbAccordionBody class="p-0">
                              <ng-template>
                                <table class="table table-borderless">
                                  <ng-container *ngFor="let particular of access.particulars">
                                    <tr>
                                      <td width="28%">
                                        <div class="ps-5">
                                          {{ particular.particularsName }}
                                        </div>
                                      </td>
                                      <ng-container *ngFor="let role of roles">
                                        <td width="12%">
                                          <div class="form-check-list d-flex gap-3 flex-wrap">
                                            <div class="form-check-box position-relative">
                                              <input type="checkbox" (change)="updateUserRole($event, role, access, particular)"
                                                     [checked]="getRolesChecked(role, access, particular)">
                                              <label><span class="opacity-0">1</span></label>
                                            </div>
                                          </div>
                                        </td>
                                      </ng-container>
                                      <td width="12%">

                                      </td>
                                    </tr>
                                  </ng-container>
                                </table>
                              </ng-template>
                            </div>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </ng-container>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
